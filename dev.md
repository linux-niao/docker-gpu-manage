## 我想创建一个镜像库 模块，如下的字段
名字          必填
地址          必填
描述
来源        
是否上架    必填 bool,默认上架
备注

## 我想创建一个算力节点 模块，如下的字段
名字     必填
区域
CPU
内存
系统盘容量
数据盘容量
ip地址公网  必填
ip地址内网  必填
ssh端口  必填，默认22
用户名  
密码  
显卡名称   
显卡数量
docker连接地址   
使用TLS     bool  默认启用
CA证书    text  前端强制用 普通text输入框进行输入，不要用富文本框
客户端证书 text  前端强制用 普通text输入框进行输入，不要用富文本框
客户端私钥 text  前端强制用 普通text输入框进行输入，不要用富文本框
是否上架   必填 bool 默认上架
备注


## 我想创建一个产品规格 模块，如下的字段
名称    必填
显卡型号  必填
显卡数量
CPU核心数
内存(GB)
系统盘容量(GB)
数据盘容器(GB)
价格/小时
是否上架   必填 bool 默认上架
备注


## 我想创建一个实例管理  模块，如下的字段
镜像            1对1     镜像表     必填
模版            1对1     产品规格   必填  
用户            前端不显示， 提交的时候后端自动填写。
节点            1对1    算力节点表   必填
Docker容器        后端创建后自动回填
实例名称            必填 字符
容器状态            字符格式  前端不显示， 每次状态变更后由后端自动填写。
备注
操作    关闭/删除/重启


> -----------------------------------------------------------------------------------


## 核心业务流程逻辑


新增加一个  新增实例 按钮。 点击按钮后， 实现分步选择流程
选择镜像             从镜像库中选择   上架状态    
选择显卡规格          从产品规格中选择 上架状态   前端 显示 显卡规格的名字+显卡型号+数量+CPU/硬盘/系统盘/数据盘容量 （只修改弹窗）
显卡规格选择之后，才能选择节点，默认节点为空。


新增一个查询接口，生成对应  API 权限记录
根据选择的产品规格，去 算力节点 中 匹配 满足要求的 算力节点。
例如:
选择了产品规格 中的   4090显卡   2块   CPU 要求 2核心  内存要求4G  系统盘要求50G，容量盘要求50G。
根据这些去匹配  算力节点 中   已上架 节点的   CPU 内存 系统盘 数据盘  显卡型号 数量。
需要用 已上架 的算力节点，减掉 实例管理 中 已经创建的配置情况后，再去匹配。自动更新容器状态。



提交创建后，去对应的  算力节点 获取docker连接信息，然后 创建对应的容器  通过docker api 创建。 并在实例创建成功后回填 containerId 与状态。

需要根据创建实例的模板，去配置容器 对应的参数 
 CPU --cpus=2   内存  --memory=4g  系统盘  --storage-opt overlay2.size=20G  容量盘  命名卷映射到 "/data"   显卡数量 --gpus 1 
 如果不支持 --storage-opt overlay2.size=20G ，就跳过这个参数，重试。
必须确保这些配置参数能准确转换为 Docker API 的对应参数。
删除容器的时候，会自动把挂载的数据卷 一起删除。



普通用户	任意（非888） 可以创建， 只能看到自己创建的实例，删除自己的实例。 列表接口必须根据当前登录用户的 userId 进行数据过滤。
管理员（Admin）	888	     可以创建 。 可以看到所有用户创建的实例，删除所有的实例。	查询列表接口中，如果用户 authorityId = 888，则应返回所有数据，跳过 userId 过滤。

实例管理  中增加操作
启动 重启 关闭容器，查看日志，终端xterm.js 等功能，通过对接docker api。
终端需要在 vite.config.js 为代理添加了 ws: true

当前用户只能操作自己创建的实例， 管理员可以操作所有。自动更新容器状态。前端增加对应的按钮 和 对应  API 权限记录。

删除实例时，同时删除容器。必须容器删除掉，才能删除实例。否则报错。

